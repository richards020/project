<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>secret</title>

<style>
body{
  margin:0;
  background:#e5e5ea;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text",sans-serif;
}

.phone{
  width:390px;
  height:844px;
  background:white;
  border-radius:55px;
  overflow:hidden;
  box-shadow:0 25px 70px rgba(0,0,0,.3);
  position:relative;
  display:flex;
  flex-direction:column;
}

.island{
  position:absolute;
  top:12px;
  left:50%;
  transform:translateX(-50%);
  width:125px;
  height:35px;
  background:black;
  border-radius:20px;
  z-index:5;
}

.status-bar{
  height:50px;
  padding:0 20px;
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  font-weight:600;
  font-size:15px;
}

.status-icons{
  display:flex;
  gap:6px;
  align-items:center;
}

.battery{
  width:24px;
  height:12px;
  border:1.5px solid black;
  border-radius:3px;
  position:relative;
}
.battery::after{
  content:"";
  position:absolute;
  right:-4px;
  top:3px;
  width:3px;
  height:6px;
  background:black;
  border-radius:1px;
}
.battery-level{
  height:100%;
  width:80%;
  background:black;
}

.header{
  text-align:center;
  padding:10px;
  border-bottom:1px solid #ddd;
  font-weight:600;
}

.messages{
  flex:1;
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:12px;
  overflow-y:auto;
}

.bubble{
  max-width:75%;
  padding:12px 16px;
  border-radius:22px;
  font-size:16px;
  position:relative;
  animation:pop .25s ease;
}

.received{
  background:#e5e5ea;
  align-self:flex-start;
}
.sent{
  background:#0A84FF;
  color:white;
  align-self:flex-end;
}

.read-receipt{
  font-size:12px;
  color:#8e8e93;
  align-self:flex-end;
  margin-right:8px;
}

@keyframes pop{
  from{transform:scale(.9);opacity:0}
  to{transform:scale(1);opacity:1}
}

.buttons{
  padding:10px;
  display:flex;
  justify-content:center;
  gap:15px;
  border-top:1px solid #eee;
}

button{
  padding:10px 20px;
  font-size:16px;
  border-radius:20px;
  border:none;
  cursor:pointer;
  transition:.3s;
}

#yesBtn{
  background:#0A84FF;
  color:white;
}
#noBtn{
  background:#d1d1d6;
}

</style>
</head>

<body>

<div class="phone">
<div class="island"></div>

<div class="status-bar">
  <div id="time"></div>
  <div class="status-icons">
    <div class="battery">
      <div class="battery-level" id="batteryLevel"></div>
    </div>
  </div>
</div>

<div class="header">Ava‚ù§Ô∏è</div>

<div class="messages" id="messages">
  <div class="bubble received">hey ava </div>
</div>

<div class="buttons">
  <button id="yesBtn">Yes‚ù§Ô∏è</button>
  <button id="noBtn">Nuh uh ... </button>
</div>

</div>

<audio id="bgMusic" src= "cafe.mp3" loop></audio>

<script>
const yesBtn=document.getElementById("yesBtn");
const noBtn=document.getElementById("noBtn");
const messages=document.getElementById("messages");
const music = document.getElementById("bgMusic");
music.volume = 0.3;

let yesScale=1;
let noScale=1;

// Play music on first interaction 
document.body.addEventListener("click", () => {
  music.play().catch(() => {});
}, { once: true });


// CLOCK //
function updateTime(){
  const now=new Date();
  let h=now.getHours();
  let m=now.getMinutes();
  let ampm=h>=12?"PM":"AM";
  h=h%12||12;
  m=m<10?"0"+m:m;
  document.getElementById("time").textContent=h+":"+m+" "+ampm;
}
updateTime();
setInterval(updateTime,60000);

//MESSAGE FUNCTIONS 
function addBubble(text,type="received"){
  const bubble=document.createElement("div");
  bubble.className="bubble "+type;
  bubble.textContent=text;
  messages.appendChild(bubble);
  messages.scrollTop=messages.scrollHeight;
}

function addReadReceipt(){
  const now=new Date();
  let h=now.getHours();
  let m=now.getMinutes();
  let ampm=h>=12?"PM":"AM";
  h=h%12||12;
  m=m<10?"0"+m:m;
  const receipt=document.createElement("div");
  receipt.className="read-receipt";
  receipt.textContent="Read "+h+":"+m+" "+ampm;
  messages.appendChild(receipt);
}

function showTyping(callback, delay=1500){
  const typing=document.createElement("div");
  typing.className="bubble received";
  typing.textContent="typing...";
  typing.style.opacity=".6";
  messages.appendChild(typing);
  messages.scrollTop=messages.scrollHeight;

  setTimeout(()=>{
    typing.remove();
    callback();
  },delay);
}

// Initial Messages 
setTimeout(()=>{
  addBubble("i have something important to ask you ");
  setTimeout(()=>{
    addBubble("will you be my valentine?");
  },1500);
},1000);

// No Button 
let noCount = 0;

const noMessages = [
  "are you sure? ü§®",
  "wait‚Ä¶ think again pls‚ÄºÔ∏è",
  "this might be the wrong answer üëÄ",
  "you sure you wanna do that?? üôÑ",
  "last chance ava ü´©",
  "okay but like think again üòê"
];

noBtn.addEventListener("click",()=>{
  noCount++;

  yesScale += 0.25;
  noScale -= 0.1;
  if(noScale < 0.3) noScale = 0.3;

  yesBtn.style.transform = `scale(${yesScale})`;
  noBtn.style.transform = `scale(${noScale})`;

  // Choose message based on how many times she pressed No
  let messageIndex = noCount - 1;

  if(messageIndex < noMessages.length){
    addBubble(noMessages[messageIndex]);
  } else {
    addBubble("the yes button is looking real good üëÄü´¢");
  }
});

//Yes Button 
yesBtn.addEventListener("click",()=>{
  addBubble("YES üíô","sent");

  yesBtn.style.display="none";
  noBtn.style.display="none";

  setTimeout(()=>{
    addBubble("Delivered","read-receipt");
    setTimeout(addReadReceipt,1200);
  },800);

  setTimeout(()=>{
    showTyping(()=>{
      addBubble("YAY");
    },1800);
  },2200);

  setTimeout(()=>{
    showTyping(()=>{
      addBubble("i love you ‚ù§Ô∏è");
    },2000);
  },4500);
});
</script>

</body>
</html>
